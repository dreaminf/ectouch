<FilesMatch "\.(bak|inc|lib|sh|tpl|lbi|dwt)$">
    order deny,allow
    deny from all
</FilesMatch>

RewriteEngine On
RewriteBase /mobile/

# direct one-word access
RewriteRule ^index\.html$    index\.php [L]
RewriteRule ^category$      index\.php [L]

# access any object by its numeric identifier
RewriteRule ^feed-c([0-9]+)\.xml$       index\.php\?c=feed&cat=$1 [L]
RewriteRule ^feed-b([0-9]+)\.xml$       index\.php\?c=feed&brand=$1 [L]
RewriteRule ^feed-type([^-]+)\.xml$     index\.php\?c=feed&type=$1 [L]
RewriteRule ^feed\.xml$                 index\.php?c=feed [L]

RewriteRule ^category-([0-9]+)-b([0-9]+)-min([0-9]+)-max([0-9]+)-attr([^-]*)-([0-9]+)-(.+)-([a-zA-Z]+)(.*)\.html$  index\.php\?c=category&id=$1&brand=$2&price_min=$3&price_max=$4&filter_attr=$5&page=$6&sort=$7&order=$8 [QSA,L]
RewriteRule ^category-([0-9]+)-b([0-9]+)-min([0-9]+)-max([0-9]+)-attr([^-]*)(.*)\.html$                            index\.php\?c=category&id=$1&brand=$2&price_min=$3&price_max=$4&filter_attr=$5 [QSA,L]
RewriteRule ^category-([0-9]+)-b([0-9]+)-([0-9]+)-(.+)-([a-zA-Z]+)(.*)\.html$                                      index\.php\?c=category&id=$1&brand=$2&page=$3&sort=$4&order=$5 [QSA,L]
RewriteRule ^category-([0-9]+)-b([0-9]+)-([0-9]+)(.*)\.html$                                                       index\.php\?c=category&id=$1&brand=$2&page=$3 [QSA,L]
RewriteRule ^category-([0-9]+)-b([0-9]+)(.*)\.html$                                                                index\.php\?c=category&id=$1&brand=$2 [QSA,L]
RewriteRule ^category-([0-9]+)(.*)\.html$                                                                          index\.php\?c=category&id=$1 [QSA,L]

RewriteRule ^goods-([0-9]+)(.*)\.html$  index\.php\?c=goods&id=$1 [QSA,L]

RewriteRule ^article_cat-([0-9]+)-([0-9]+)-(.+)-([a-zA-Z]+)(.*)\.html$  index\.php\?c=article&a=cat&id=$1&page=$2&sort=$3&order=$4 [QSA,L]
RewriteRule ^article_cat-([0-9]+)-([0-9]+)-(.+)(.*)\.html$              index\.php\?c=article&a=cat&id=$1&page=$2&keywords=$3 [QSA,L]
RewriteRule ^article_cat-([0-9]+)-([0-9]+)(.*)\.html$                   index\.php\?c=article&a=cat&id=$1&page=$2 [QSA,L]
RewriteRule ^article_cat-([0-9]+)(.*)\.html$                            index\.php\?c=article&a=cat&id=$1 [QSA,L]

RewriteRule ^article-([0-9]+)(.*)\.html$                                index\.php\?c=article&id=$1   [QSA,L]

RewriteRule ^brand-([0-9]+)-c([0-9]+)-([0-9]+)-(.+)-([a-zA-Z]+)\.html   index\.php\?c=brand&id=$1&cat=$2&page=$3&sort=$4&order=$5 [QSA,L]
RewriteRule ^brand-([0-9]+)-c([0-9]+)-([0-9]+)(.*)\.html                index\.php\?c=brand&id=$1&cat=$2&page=$3 [QSA,L]
RewriteRule ^brand-([0-9]+)-c([0-9]+)(.*)\.html                         index\.php\?c=brand&id=$1&cat=$2 [QSA,L]
RewriteRule ^brand-([0-9]+)(.*)\.html                                   index\.php\?c=brand&id=$1 [QSA,L]

RewriteRule ^tag-(.*)\.html                                             index\.php\?c=search&keywords=$1 [QSA,L]
RewriteRule ^snatch-([0-9]+)\.html$                                     index\.php\?c=snatch&id=$1 [QSA,L]
RewriteRule ^group_buy-([0-9]+)\.html$                                  index\.php\?c=group_buy&a=view&id=$1 [QSA,L]
RewriteRule ^auction-([0-9]+)\.html$                                    index\.php\?c=auction&a=view&id=$1 [QSA,L]

RewriteRule ^exchange-id([0-9]+)(.*)\.html$                             index\.php\?c=exchange&a=view&id=$1 [QSA,L]
RewriteRule ^exchange-([0-9]+)-min([0-9]+)-max([0-9]+)-([0-9]+)-(.+)-([a-zA-Z]+)(.*)\.html$ index\.php\?c=exchange&cat_id=$1&integral_min=$2&integral_max=$3&page=$4&sort=$5&order=$6 [QSA,L]
RewriteRule ^exchange-([0-9]+)-([0-9]+)-(.+)-([a-zA-Z]+)(.*)\.html$                         index\.php\?c=exchange&cat_id=$1&page=$2&sort=$3&order=$4 [QSA,L]
RewriteRule ^exchange-([0-9]+)-([0-9]+)(.*)\.html$                                          index\.php\?c=exchange&cat_id=$1&page=$2  [QSA,L]
RewriteRule ^exchange-([0-9]+)(.*)\.html$                                                   index\.php\?c=exchange&cat_id=$1  [QSA,L]